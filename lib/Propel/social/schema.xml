<?xml version="1.0" encoding="UTF-8"?>
<database name="social" defaultIdMethod="native">
  <table name="users" phpName="User">
    <column name="id" type="integer" size="50" required="true" primaryKey="true" autoIncrement="true"/>
    <column name="username" type="varchar" size="15" required="true" phpName="username"/>
    	<validator column="username">
    		<rule name="minLength"  value="8"  message="Username must be at least ${value} characters !" />
    	</validator>
    	<validator column="username">
	    	<rule
	    	name="unique"
	    	message="Username already exists !" />
	    </validator>
    <column name="password" type="varchar" size="75" required="true" phpName="password"/>
    <column name="email" type="varchar" size="50" required="true" phpName="email"/>
    	<validator column="email">
		    <rule
		    name="match"
		    value="/^([a-zA-Z0-9])+([\.a-zA-Z0-9_-])*@([a-zA-Z0-9])+(\.[a-zA-Z0-9_-]+)+$/"
		    message="Please enter a valid email address." />
		</validator>
		<validator column="email">
			<rule
			name="unique"
			message="Email already in use!" />
		</validator>
    <column name="first_name" type="varchar" size="50" required="true"/>
    <column name="last_name" type="varchar" size="50" required="true"/>
    <column name="activate_code" type="varchar" size="10" required="true"/>
    <column name="is_activated" defaultValue="1" type="integer" size="1" required="true"/>
    <column name="avatar_filename" type="varchar" size="50" required="true"/>
    <column name="banner_filename" type="varchar" size="50" required="true"/>
    <column name="hide_stream" defaultValue="0" type="integer" size="1" required="true"/>
    <column name="invisible" defaultValue="0" type="integer" size="1" required="true"/>
  </table>
  <table name="friends" phpName="Friend">
    <column name="groupid" type="integer" size="50" required="true" primaryKey="true" autoIncrement="true"/>
    <column name="userid" type="integer" size="50" required="true"/>
    <column name="friendid" type="integer" size="50" required="true"/>
  </table>
  <table name="friend_requests" phpName="Requests">
    <column name="requestid" type="integer" size="255" required="true" primaryKey="true" autoIncrement="true"/>
    <column name="userid" type="integer" size="255" required="true"/>
    <column name="friendid" type="integer" size="255" required="true"/>
  </table>
  <table name="status" phpName="Status">
    <column name="postid" type="integer" size="50" required="true" primaryKey="true" autoIncrement="true"/>
    <column name="userid" type="integer" size="50" required="true"/>
    <column name="bucketid" type="integer" size="50" required="true"/>
    <column name="date" type="timestamp" required="true"/>
    <column name="status" type="LONGVARCHAR" required="true"/>
    <column name="drops" defaultValue="0" type="integer" size="11" required="true"/>
  </table>
  <table name="profile" phpName="Profile">
    <column name="userid" type="integer" size="50" required="true" primaryKey="true"/>
    <column name="phone" type="varchar" size="10" required="true"/>
    <column name="bio" type="varchar" size="100" required="true"/>
    <column name="website" type="varchar" size="100" required="true"/>
  </table>
  <table name="user_buckets" phpName="Bucket">
    <column name="bucketid" type="integer" size="50" required="true" primaryKey="true" autoIncrement="true"/>
    <column name="userid" type="integer" size="50" required="true"/>
    <column name="bucket_name" type="varchar" size="50" required="true"/>
  </table>
   <table name="user_bucket_friend" phpName="FriendBucket">
    <column name="bucketid" type="integer" size="50" required="true" primaryKey="true"/>
    <column name="userid" type="integer" size="50" required="true"/>
  </table>
  <table name="galleries" phpName="Galleries">
    <column name="GalleryID" type="integer" size="50" required="true" primaryKey="true" autoIncrement="true"/>
    <column name="UserID" type="integer" size="50" required="true"/>
    <column name="GalleryName" type="varchar" size="50" required="true"/>
    <column name="Date" type="timestamp" required="true"/>
  </table>
    <table name="photos" phpName="Photos">
    <column name="PhotoID" type="integer" size="50" required="true" primaryKey="true" autoIncrement="true"/>
    <column name="UserID" type="integer" size="50" required="true"/>
    <column name="GalleryID" type="integer" size="50" required="true"/>
    <column name="PhotoName" type="varchar" size="50" required="true"/>
    <column name="Date" type="timestamp" required="true"/>
  </table>
  <table name="comments" phpName="Comments">
    <column name="PostID" type="integer" size="50" required="true"/>
    <column name="CommentID" type="integer" size="50" required="true" primaryKey="true" autoIncrement="true"/>
    <column name="UserID" type="integer" size="50" required="true"/>
    <column name="Date" type="timestamp" required="true"/>
    <column name="Content" type="varchar" size="500" required="true"/>
    <column name="Tier" defaultValue="0" type="integer" size="11" required="true"/>
  </table>
<table name="message_users" phpName="UserMessage">
	<column name="id" type="INTEGER" size="50" primaryKey="true" autoIncrement="true"/>
	<column name="MessageID" type="INTEGER" size="50" />
	<column name="UserID" type="INTEGER" size="50" />
</table>
<table name="message_contents" phpName="MessageContents">
	<column name="MessageID" type="INTEGER" size="50" />
	<column name="ThreadID" type="INTEGER" size="50" primaryKey="true" autoIncrement="true"/>
	<column name="UserID" type="INTEGER" size="50" />
	<column name="Content" type="VARCHAR" size="500" />
	<column name="Date" type="timestamp"/>
</table>
<table name="messages">
	<column name="MessageID" type="INTEGER" size="50" required="true" primaryKey="true" autoIncrement="true"/>
	<column name="Date" type="timestamp" required="true"/>
	<column name="Subject" type="VARCHAR" size="500" required="true"/>
</table>
<table name="votes">
	<column name="voteid" type="INTEGER" size="50" required="true" primaryKey="true" autoIncrement="true"/>
	<column name="postid" type="INTEGER" size="50" />
	<column name="userid" type="INTEGER" size="50" />
	<column name="value" type="INTEGER" size="50" />
</table>
<table name="url">
	<column name="urlid" type="INTEGER" size="50" required="true" primaryKey="true" autoIncrement="true"/>
	<column name="urlhost" type="VARCHAR" size="255" required="true"/>
	<column name="urlpath" type="VARCHAR" size="255" required="true"/>
	<column name="urlquery" type="VARCHAR" size="255" required="true"/>
	<column name="contenttype" type="VARCHAR" size="255" required="true"/>
	<column name="title" type="VARCHAR" size="255" required="true"/>
	<column name="content" type="VARCHAR" size="255" required="true"/>
	<column name="contentimg" type="VARCHAR" size="255" required="true"/>
</table>
<table name="post_url" phpName="PostUrl">
	<column name="posturlid" type="INTEGER" size="50" required="true" primaryKey="true" autoIncrement="true"/>
	<column name="urlid" type="INTEGER" size="50" />
	<column name="postid" type="INTEGER" size="50" />
</table>
<table name="message_archive">
	<column name="archive_id" type="INTEGER" size="50" required="true" primaryKey="true" autoIncrement="true"  phpName="archiveid"/>
	<column name="message_id" type="INTEGER" size="50" phpName="messageid" />
	<column name="thread_id" type="INTEGER" size="50" phpName="threadid" />
	<column name="user_id" type="INTEGER" size="50" phpName="userid" />
</table>
<table name="general_notifications" phpName="Notification">
	<column name="notificationid" type="INTEGER" size="50" required="true" primaryKey="true" autoIncrement="true" />
	<column name="userid" type="INTEGER" size="50"  />
	<column name="triggerid" type="INTEGER" size="50"  />
	<column name="type" type="varchar" size="50"  />
	<column name="content" type="varchar" size="50" />
	<column name="refid" type="INTEGER" size="50"  />
</table>
</database>
